<div *ngIf="searchResults && searchResults.length > 0" class="search-results">
    <button type="submit" class="btn btn-link btn-sm" (click)="expandAll()">
        <clr-icon shape="plus"></clr-icon>
        Expand all
    </button>
    <button type="submit" class="btn btn-link btn-sm" (click)="collapseAll()">
        <clr-icon shape="minus"></clr-icon>
        Collapse all
    </button>
    <clr-tree [clrLazy]="true">
        <clr-tree-node *clrRecursiveFor="let searchResult of searchResults; getChildren: getChildren"
                    [clrExpandable]="searchResult.leafs && searchResult.leafs.length > 0" [(clrExpanded)]="searchResult.expanded"
                    (clrExpandedChange)="onExpandChange(searchResult)">
            <ng-container *ngIf="searchResult.type === 'PROJECT'">
                <clr-icon shape="organization"></clr-icon>
                <span class="expandable-name" (click)="toggleExpandLeaf(searchResult)" (dblclick)="expandTree(searchResult)">
                    {{searchResult.name}}
                </span>
                <span class="label label-info">{{searchResult.project.default_branch}}</span>
            </ng-container>
            <ng-container *ngIf="searchResult.type === 'DIRECTORY'">
                <clr-icon shape="folder"></clr-icon>
                <span class="expandable-name" (click)="toggleExpandLeaf(searchResult)" (dblclick)="expandTree(searchResult)">
                    <app-path-text class="directory-path" [path]="searchResult.name"></app-path-text>
                </span>
            </ng-container>
            <ng-container *ngIf="searchResult.type === 'FILE'">
                <clr-icon shape="file"></clr-icon>
                <a class="file-link" (click)="onFileSelected(searchResult.filePath, searchResult.project)">
                    <app-path-text class="file-path" [path]="searchResult.name"></app-path-text>
                </a>
                <span class="badge badge-success results-count" *ngIf="searchResult.fileSearchResults.length > 1">
                    {{searchResult.fileSearchResults.length}}
                </span>
            </ng-container>
        </clr-tree-node>
    </clr-tree>
</div>
